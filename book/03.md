
## Chapter 03 / Rush into 32-bit mode and introduction to C (day 3) {#ch03}

### 1. Come on, let's create a real IPL {#ch03-01}

Until today we were calling our boot sector IPL (Initial Program Loader), but in fact it never loaded anything. Today I'm thinking about actually loading something.

Since hello-os is a very boring name today we'll change it's name. The name is "papier". It's named after papier mache (paper mash). It's a material that is used for rocks that appear in movies, which are actually made of paper and they are hollow. It has a "looks like a show-off OS, but it's fine for it to be empty inside. We won't overdo it, we'll just take it easy" sort of feeling.

From now on the name will always be "Papier OS", but it won't be an OS, but rather a kind of demo program. Don't worry though, as it'll become a proper OS later.

By the way, if you think about it it's not only the OS that's "papier". Even CPU, even though it doesn't understand the concept of number, but with an addition circuit from the electric signals 0011 and 0110 it produces an electric signal like 1001. It's only the humans who give this operation a meaning like "3+9=12", all the CPU does is silently works with electric signals. The same goes for games -- when you play with computer, it's not like the computer wants to win you, or feels frustration when you win. It just executes the algorithms that have been programmed, but when you play it does indeed feel like the computer feels emotions. But since it's internals are just a program, it's empty. Thus papier. Let's go, papier\~!

Let's start with a simple program. The first 512 bytes of the disk are the boot sector so let's try reading the 512 following the boot sector. I modified the program at once. You can see it in `days/03_v1`

Now, the new part is roughly this:

```
; The part that's been written today

MOV AX, 0x0820
MOV ES, AX
MOV CH, 0                ; Cyllinder 0
MOV DH, 0                ; Head 0
MOV CL, 2                ; Sector 2

MOV AH, 0x02             ; AH=02h: read the disk
MOV AL, 1                ; 1 Sector
MOV BX, 0
MOV DL, 0x00             ; Floppy A
INT 0x13                 ; Call BIOS Disk function
JC error
```

From the new instructions we got only one -- JC. It is short for "Jump if carry", so if the carry flag is 1, it will perform a jump, otherwise execute the next instruction. If you're wondering what is the carry flag I'm bringing out all of a sudden, don't worry I'll explain it soon.

---

Well there's one instruction you may understand the meaning of but have no idea what it does, and that's `INT 0x13`.

### 2. If error, we'll restart {#ch03-02}

### 3. Read until 18'th sector {#ch03-03}

### 4. Try reading 10 cylinders {#ch03-04}

### 5. Start writing the OS itself {#ch03-05}

### 6. Running OS from bootsector {#ch03-06}

### 7. Prepare for 32-bit mode {#ch03-07}

### 8. Finally introduction to C {#ch03-08}

### 9. Anyway we want to HLT {#ch03-09}
